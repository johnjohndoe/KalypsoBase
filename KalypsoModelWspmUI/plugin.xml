<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
   <extension-point id="profilPointsSource" name="profilPointsSource" schema="schema/profilPointsSource.exsd"/>
   <extension-point id="profilPointsTarget" name="profilPointsTarget" schema="schema/profilPointsTarget.exsd"/>
   <extension-point id="profilChartLayerProvider" name="profilChartLayerProvider" schema="schema/profilChartLayerProvider.exsd"/>
   <extension-point id="pointPropertyCalculator" name="pointPropertyCalculator" schema="schema/pointPropertyCalculator.exsd"/>
   <extension-point id="profilPointPropertyUiHandlerProvider" name="profilPointPropertyUiHandlerProvider" schema="schema/profilPointPropertyUiHandlerProvider.exsd"/>
   <extension-point id="chartProvider" name="chartProvider" schema="schema/chartProvider.exsd"/>

     <extension
           point="org.eclipse.ui.viewActions">
        <viewContribution
              id="com.bce.profil.eclipse.view.tableContribution"
              targetID="org.kalypso.model.wspm.ui.view.table.TableView">
           <menu
                 id="tableViewMenu"
                 label="%tableViewMenu">
              <groupMarker name="points"/>
              <separator name="additions"/>
           </menu>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.InsertPointsActionDelegate"
                 icon="icons/elcl16/table_insert_points.gif"
                 id="com.bce.profil.eclipse.view.table.insertPoints"
                 label="%com.bce.profil.eclipse.view.table.insertPoints"
                 menubarPath="points"
                 style="push"
                 tooltip="%com.bce.profil.eclipse.view.table.insertPoints.tooltip"/>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.DouglasPeuckerActionDelegate"
                 id="com.bce.profil.eclipse.view.table.douglasPeucker"
                 label="%com.bce.profil.eclipse.view.table.douglasPeucker"
                 menubarPath="points"
                 style="push"
                 tooltip="%com.bce.profil.eclipse.view.table.douglasPeucker.tooltip"/>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.PropertyEditDelegate"
                 id="com.bce.profil.eclipse.view.table.propertyedit"
                 label="%com.bce.profil.eclipse.view.table.propertyedit"
                 menubarPath="points"
                 style="push"
                 tooltip="%com.bce.profil.eclipse.view.table.propertyedit.tooltip">
           </action>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.FillMissingGeometriesActionDelegate"
                 id="com.bce.profil.eclipse.view.table.fill.missing"
                 label="%org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard.name"
                 menubarPath="points"
                 style="push"
                 tooltip="%org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard.description">
           </action>
        </viewContribution>
     </extension>
     <extension
           point="org.eclipse.ui.views">
        <category
              id="org.kalypso.model.wspm.profil.view.category"
              name="%category.name.0"
              />
        <view
              allowMultiple="false"
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.legend.LegendViewPart"
              icon="icons/eview16/profil_legend.gif"
              id="org.kalypso.model.wspm.ui.view.legend.LegendViewPart"
              name="%org.kalypso.model.wspm.ui.view.legend.LegendView"/>
        <view
              allowMultiple="false"
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.LayerViewPart"
              icon="icons/eview16/profil_panel.gif"
              id="org.kalypso.model.wspm.ui.view.LayerViewPart"
              name="%org.kalypso.model.wspm.ui.view.LayerView"/>
        <view
              allowMultiple="false"
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.table.TableView"
              icon="icons/eview16/profil_table.gif"
              id="org.kalypso.model.wspm.ui.view.table.TableView"
              name="%org.kalypso.model.wspm.ui.view.table.TableView"/>
        <view
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.chart.ProfilChartViewPart"
              icon="icons/eview16/profil_table.gif"
              id="org.kalypso.model.wspm.ui.view.chart.ChartView"
              name="%org.kalypso.model.wspm.ui.view.chart.ChartView"/>
     </extension>


   <extension
         id="profilemarker"
         name="%extension.name"
         point="org.eclipse.core.resources.markers">
      <super type="org.eclipse.core.resources.problemmarker"/>
      <persistent value="false"/>
   </extension>
   <extension point="org.eclipse.ui.preferencePages">
        <page
              category="org.kalypso.ui.preferences.KalypsoPreferencePage"
              class="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              id="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              name="%org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"/>
        <page
              category="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              class="org.kalypso.model.wspm.ui.preferences.ValidatorPreferencePage"
              id="org.kalypso.model.wspm.ui.preferences.ValidatorPreferencePage"
              name="%org.kalypso.model.wspm.ui.preferences.ValidatorPreferencePage"/>
        <!--
        FIXME: not use any more ,but we expect to have some preferences for the table in the future, so kept for the moment.
         
        <page
              category="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              class="org.kalypso.model.wspm.ui.preferences.TablePreferencePage"
              id="org.kalypso.model.wspm.ui.preferences.TablePreferencePage"
              name="%page.name.0">
        </page>
        -->
   </extension>
   <extension
           point="org.kalypso.model.wspm.ui.profilPointsSource">
        <profilPointsSource
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource"/>
        <profilPointsSource
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource"/>
     </extension>
     <extension
           point="org.kalypso.model.wspm.ui.profilPointsTarget">
        <profilPointTarget
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget"/>
        <profilPointTarget
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget"/>
        <profilPointTarget
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget"/>
     </extension>
     <extension
         point="org.eclipse.ui.popupMenus">
        <objectContribution
              adaptable="true"
              id="org.kalypso.model.wspm.ui.profil.view.chart.layer.IProfilChartLayer.objectcontribution"
              objectClass="org.kalypso.model.wspm.ui.view.chart.IProfilChartLayer">
           <action
                 class="org.kalypso.model.wspm.ui.action.ProfilLayerActionDelegate"
                 enablesFor="1"
                 icon="icons/elcl16/profil_legend_props.gif"
                 id="com.bce.profil.app.profilLayerContributions.showProperties"
                 label="%com.bce.profil.app.profilLayerContributions.showProperties"
                 menubarPath="additions"
                 style="push"
                 tooltip="%com.bce.profil.app.profilLayerContributions.showProperties.tooltip"/>
        </objectContribution>
     </extension>
      <extension point="org.eclipse.ui.menus">
         <menuContribution allPopups="false" locationURI="popup:org.eclipse.ui.popup.any?before=gmlToolsEnd">
            <command commandId="org.kalypso.model.wspm.ui.commands.ShowProfile" style="push">
               <visibleWhen checkEnabled="true"/>
            </command>
         </menuContribution>
         <menuContribution allPopups="false" locationURI="toolbar:org.kalypso.featureview.views.FeatureView">
            <command commandId="org.kalypso.model.wspm.ui.commands.ShowProfile" style="push">
               <visibleWhen checkEnabled="true"/>
            </command>
         </menuContribution>
        <menuContribution locationURI="toolbar:org.kalypso.gml.toolbar?before=gmlToolsEnd">
            <command commandId="org.kalypso.model.wspm.ui.commands.ShowProfile" style="push">
               <visibleWhen checkEnabled="true"/>
            </command>
        </menuContribution>
      </extension>
     <extension point="org.kalypso.core.catalogContribution">
        <catalogContribution
              class="org.kalypso.model.wspm.ui.catalog.WspmFeatureTypeCatalogContribution"
              name="Wspm Style Catalog"/>
     </extension>
     <extension
           point="org.eclipse.ui.ide.markerResolution">
        <markerResolutionGenerator class="org.kalypso.model.wspm.ui.profil.validation.ProfilMarkerResolutionGenerator"/>
     </extension>
     <extension
           point="org.eclipse.ui.newWizards">
        <category
              id="org.kalypso.wspm.ui"
              name="%org.kalypso.wspm.ui"
              parentCategory="org.kalypso.ui.newwizards.kalypso"/>
     </extension>
     <extension
           point="org.eclipse.ui.perspectives">
        <perspective
              class="org.kalypso.model.wspm.ui.product.WspmPerspectiveFactory"
              fixed="false"
              icon="icons/obj16/wspmPerspective.gif"
              id="org.kalypso.model.wspm.ui.product.WspmPerspectiveFactory"
              name="%org.kalypso.model.wspm.ui.product.WspmPerspectiveFactory"/>
        <perspective
              class="org.kalypso.model.wspm.ui.product.ProfileManagerPerspective"
              fixed="false"
              icon="icons/eview16/wsp16.gif"
              id="org.kalypso.model.wspm.ui.product.ProfileManagerPerspective"
              name="%perspective.name.0"/>
     </extension>
     <extension
           point="org.kalypso.model.wspm.core.profileFeatureProvider">
        <profileFeatureProvider
              class="org.kalypso.model.wspm.core.gml.DefaultProfileFeatureProvider"
              id="org.kalypso.model.wspm.core.gml.DefaultProfileFeatureProvider"/>
     </extension>
   <extension
         point="org.kalypso.ui.featureViewExtensionControl">
      <extensionControl
            class="org.kalypso.model.wspm.ui.featureview.ChartFeatureControlFactory"
            id="org.kalypso.model.wspm.ui.featureview.ChartFeatureControlFactory"/>
   </extension>
      <extension
            point="org.eclipse.ui.contexts">
         <context
               id="org.kalypso.model.wspm.ui.view.table.swt.context"
               name="%context.name.0"
               parentId="org.eclipse.ui.contexts.window"/>
      </extension>
      <extension
            point="org.kalypso.model.wspm.ui.pointPropertyCalculator">
         <pointPropertyCalculator
               class="org.kalypso.model.wspm.core.util.pointpropertycalculator.AddFixValueOperator"
               id="org.calypso.model.wspm.core.util.pointpropertycalculator.addfixvalue"
               label="%org.calypso.model.wspm.core.util.pointpropertycalculator.addfixvalue"
               tooltip="%org.calypso.model.wspm.core.util.pointpropertycalculator.addfixvalue.description">
         </pointPropertyCalculator>
         <pointPropertyCalculator
               class="org.kalypso.model.wspm.core.util.pointpropertycalculator.SetFixValueOperator"
               id="org.calypso.model.wspm.core.util.pointpropertycalculator.setfixvalue"
               label="%org.calypso.model.wspm.core.util.pointpropertycalculator.setfixvalue"
               tooltip="%org.calypso.model.wspm.core.util.pointpropertycalculator.setfixvalue.description">
         </pointPropertyCalculator>
         <pointPropertyCalculator
               class="org.kalypso.model.wspm.core.util.pointpropertycalculator.AddPercentValueOperator"
               id="org.calypso.model.wspm.core.util.pointpropertycalculator.addpercentvalue"
               label="%org.calypso.model.wspm.core.util.pointpropertycalculator.addpercentvalue"
               tooltip="%org.calypso.model.wspm.core.util.pointpropertycalculator.addpercentvalue.description">
         </pointPropertyCalculator>
      </extension>
      <extension
            point="org.eclipse.ui.menus">
         <menuContribution
               locationURI="toolbar:org.kalypso.model.wspm.ui.view.table.TableView">
            <command
                  commandId="org.kalypso.ui.tupleResult.copyToClipboardCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveDownSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveUpSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.deleteSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.addRowCommand"
                  style="push">
            </command>
         </menuContribution>
         <menuContribution
               locationURI="popup:org.kalypso.model.wspm.ui.view.table.TableView">
            <command
                  commandId="org.kalypso.ui.tupleResult.copyToClipboardCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveUpSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveDownSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.deleteSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.addRowCommand"
                  style="push">
            </command>
         </menuContribution>
         <menuContribution
               locationURI="toolbar:org.kalypso.model.wspm.ui.view.chart.ChartView">
            <command
                  commandId="org.kalypso.chart.ui.commands.zoom_pan_maximize"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.pan"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.maximize"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.edit"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.insert.profile.point" style="radio">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.profile.selection" style="radio">
            </command>
            <separator
                  name="seperator.radio.toogle"
                  visible="true">
            </separator>
            <command
                  commandId="org.kalypso.chart.ui.commands.profile.update.cursor" style="toggle">
            </command>
            <separator
                  name="seperator.toggle.popUp"
                  visible="true">
            </separator>
            <command
                  commandId="org.kalypso.model.wspm.ui.commands.PreviousProfileCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.model.wspm.ui.commands.NextProfileCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.ExportClipboardCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.export"
                  style="push">
            </command>
            <separator
                  name="additions"
                  visible="false">
            </separator>
         </menuContribution>
         <menuContribution
               locationURI="menu:org.kalypso.model.wspm.ui.view.chart.ChartView">
            <separator
                  name="additions"
                  visible="false">
            </separator>
         </menuContribution>
         <menuContribution
               locationURI="toolbar:org.kalypso.model.wspm.ui.view.legend.LegendViewPart">
            <command
                  commandId="org.kalypso.model.wspm.ui.view.legend.addlayer"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.model.wspm.ui.view.legend.removelayer"
                  style="push">
            </command>
         </menuContribution>
      </extension>
      <extension
            point="de.openali.odysseus.chart.factory.LayerProvider">
         <provider
               class="org.kalypso.model.wspm.ui.featureview.PolynomeLayerProvider"
               id="org.kalypso.model.wspm.ui.featureview.PolynomeLayerProvider">
         </provider>
      </extension>
      <extension
            point="org.eclipse.ui.commands">
         <command
               categoryId="org.kalypso.model.wspm.ui.view.legend.category"
               id="org.kalypso.model.wspm.ui.view.legend.addlayer"
               name="%org.kalypso.model.wspm.ui.view.legend.addlayer">
         </command>
         <category
               id="org.kalypso.model.wspm.ui.view.legend.category"
               name="%category.name">
         </category>
         <command
               categoryId="org.kalypso.model.wspm.ui.view.legend.category"
               id="org.kalypso.model.wspm.ui.view.legend.removelayer"
               name="%org.kalypso.model.wspm.ui.view.legend.removelayer">
         </command>
      </extension>
      <extension point="org.eclipse.ui.handlers">
         <handler
               class="org.kalypso.model.wspm.ui.view.legend.AddLayerHandler"
               commandId="org.kalypso.model.wspm.ui.view.legend.addlayer">
         </handler>
         <handler
               class="org.kalypso.model.wspm.ui.view.legend.RemoveLayerHandler"
               commandId="org.kalypso.model.wspm.ui.view.legend.removelayer">
         </handler>
      </extension>
      <extension
            point="org.eclipse.ui.commandImages">
         <image
               commandId="org.kalypso.model.wspm.ui.view.legend.addlayer"
               icon="icons/etool16/add_layer.gif">
         </image>
         <image
               commandId="org.kalypso.model.wspm.ui.view.legend.removelayer"
               icon="icons/etool16/delete_layer.gif">
         </image>
      </extension>

	<extension point="org.eclipse.core.expressions.definitions">
		<definition id="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected">
			<with variable="selection">
				<and>
					<count value="1"/>
					<iterate ifEmpty="false" operator="and">
					   <adapt type="org.kalypso.ogc.gml.IKalypsoTheme">
    				       <test property="org.kalypso.ui.test.theme.isFeatureTheme"/>
					   </adapt>
					</iterate>
			        <test property="org.kalypso.model.wspm.ui.hasProfileSelection"/>
				</and>
			</with>
		</definition>
      <definition
            id="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
         <with variable="selection">
            <test property="org.kalypso.model.wspm.ui.hasProfileSelection"/>
         </with>
      </definition>
      <definition
            id="org.kalypso.model.wspm.ui.definition.reachThemeSelected">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <adapt
                        type="org.kalypso.ogc.gml.IKalypsoTheme">
                     <test
                           property="org.kalypso.ui.test.theme.isFeatureTheme">
                     </test>
                  </adapt>
               </iterate>
               <test
                     property="org.kalypso.model.wspm.ui.hasReachSelection">
               </test>
            </and>
         </with>
      </definition>
      <definition
            id="org.kalypso.model.wspm.ui.definition.hasLanduseShape">
         <with
               variable="selection">
            <test
                  property="org.kalypso.model.wspm.ui.hasLanduseShape">
            </test>
         </with>
      </definition>
	</extension>

    <extension
          point="org.eclipse.core.expressions.propertyTesters">
       <propertyTester
             class="org.kalypso.model.wspm.ui.action.property.tester.ProfileSelectionTester"
             id="org.kalypso.model.wspm.ui.propertyTester.profiles"
             namespace="org.kalypso.model.wspm.ui"
             properties="hasProfileSelection"
             type="org.eclipse.jface.viewers.ISelection">
       </propertyTester>
        <propertyTester
             class="org.kalypso.model.wspm.ui.action.property.tester.ReachSelectionThemeTester"
             id="org.kalypso.model.wspm.ui.propertyTester.reach"
             namespace="org.kalypso.model.wspm.ui"
             properties="hasReachSelection"
             type="org.eclipse.jface.viewers.ISelection">
       </propertyTester>
       <propertyTester
              class="org.kalypso.model.wspm.ui.action.property.tester.LanduseShapeAvailableTester"
              id="org.kalypso.model.wspm.ui.propertyTester.landuse.shape"
              namespace="org.kalypso.model.wspm.ui"
              properties="hasLanduseShape"
              type="org.eclipse.jface.viewers.ISelection">
       </propertyTester>
    </extension>
    <extension point="org.eclipse.ui.commands">
       <command
            categoryId="org.kalypso.chart.ui.commands.category"
            id="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand"
            name="%org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand.name" description="%org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand.description">
      </command>
       <command
             categoryId="org.kalypso.chart.ui.commands.category"
             description="%org.kalypso.model.wspm.ui.commands.PreviousProfileCommand.description"
             id="org.kalypso.model.wspm.ui.commands.PreviousProfileCommand"
             name="%org.kalypso.model.wspm.ui.commands.PreviousProfileCommand.name">
       </command>
       <command
             categoryId="org.kalypso.chart.ui.commands.category"
             description="%org.kalypso.model.wspm.ui.commands.NextProfileCommand.description"
             id="org.kalypso.model.wspm.ui.commands.NextProfileCommand"
             name="%org.kalypso.model.wspm.ui.commands.NextProfileCommand.name">
       </command>
       <command
             id="org.kalypso.model.wspm.ui.commands.ShowProfile"
             description="%org.kalypso.model.wspm.ui.action.ShowProfileAction.description"
             name="%org.kalypso.model.wspm.ui.action.ShowProfileAction">
       </command>
       <command
             description="%org.kalypso.model.wspm.ui.action.CreateProfileMapAction.description"
             id="org.kalypso.model.wspm.ui.commands.CreateMapFromProfiles"
             name="%org.kalypso.model.wspm.ui.action.CreateProfileMapAction">
       </command>
    </extension>
    <extension
          point="org.eclipse.ui.commandImages">
       <image commandId="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand" icon="icons/etool16/wspLayerCommand.gif"/>
       <image
             commandId="org.kalypso.model.wspm.ui.commands.PreviousProfileCommand"
             disabledIcon="icons/etool16/prevFeature_gray.gif"
             icon="icons/etool16/prevFeature.gif">
       </image>
       <image
             commandId="org.kalypso.model.wspm.ui.commands.NextProfileCommand"
             disabledIcon="icons/etool16/nextFeature_gray.gif"
             icon="icons/etool16/nextFeature.gif">
       </image>
       <image commandId="org.kalypso.model.wspm.ui.commands.ShowProfile" icon="icons/obj16/openProfile.gif"/>
       <image commandId="org.kalypso.model.wspm.ui.commands.CreateMapFromProfiles" icon="icons/elcl16/createProfileMap.gif"/>
    </extension>
    <extension point="org.eclipse.ui.handlers">
       <handler class="org.kalypso.model.wspm.ui.view.chart.handler.WspLegendHandler" commandId="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand"/>
       <handler
             commandId="org.kalypso.model.wspm.ui.commands.PreviousProfileCommand">
          <class
                class="org.kalypso.model.wspm.ui.view.chart.handler.SwitchProfileHandler">
          </class>
          <enabledWhen>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.view.chart.handler.isPrevoiusEnabled">
             </reference>
          </enabledWhen>
       </handler>
       <handler
             commandId="org.kalypso.model.wspm.ui.commands.NextProfileCommand">
          <class
                class="org.kalypso.model.wspm.ui.view.chart.handler.SwitchProfileHandler">
          </class>
          <enabledWhen>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.view.chart.handler.isNextEnabled">
             </reference>
          </enabledWhen>
       </handler>
    </extension>
    <extension
          point="org.kalypso.ui.importWizards">
       <wizard
             category="importWizards"
             class="org.kalypso.model.wspm.ui.profil.wizard.importProfile.ImportProfileWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.importProfile.ImportProfileWizard"
             icon="icons/etool16/trippleImport.gif"
             name="%org.kalypso.model.wspm.ui.action.ImportProfileTrippelAction">
          <description>%org.kalypso.model.wspm.ui.action.ImportProfileTrippelAction.description</description>
       </wizard>
       <wizard
             category="importWizards"
             class="org.kalypso.model.wspm.ui.profil.wizard.importProfile.ImportPrfWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.importProfile.ImportPrfWizard"
             icon="icons/obj16/wspwin16.gif"
             name="%org.kalypso.model.wspm.ui.action.ImportProfilePrfAction">
          <description>%org.kalypso.model.wspm.ui.action.ImportProfilePrfAction.description</description>
       </wizard>
    </extension>
    <extension
          point="org.kalypso.gml.ui.toolWizards">
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.flipProfile.FlipProfileWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.flipProfile.FlipProfileWizard"
             icon="icons/obj16/flipProfile.gif"
             name="%org.kalypso.model.wspm.ui.action.FlipProfileAction">
             <description>%org.kalypso.model.wspm.ui.action.FlipProfileAction.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard"
             icon="icons/obj16/snap-orthogonal.png"
             name="%org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard.name">
             <description>%org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.propertyEdit.PropertyEditWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.propertyEdit.PropertyEditWizard"
             icon="icons/etool16/profile_property_edit.gif"
             name="%org.kalypso.model.wspm.ui.action.PropertyEditAction">
             <description>%org.kalypso.model.wspm.ui.action.PropertyEditAction.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.validateProfiles.ValidateProfilesWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.validateProfiles.ValidateProfilesWizard"
             icon="icons/etool16/profile_validate.gif"
             name="%org.kalypso.model.wspm.ui.action.ValidateProfilesAction">
             <description>%org.kalypso.model.wspm.ui.action.ValidateProfilesAction.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.createDivider.CreateProfileDeviderWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.createDivider.CreateProfileDeviderWizard"
             name="%org.kalypso.model.wspm.ui.action.CreateDeviderMapThemeAction">
             <description>%org.kalypso.model.wspm.ui.action.CreateDeviderMapThemeAction.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.intersectRoughness.IntersectRoughnessWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.intersectRoughness.IntersectRoughnessWizard"
             name="%org.kalypso.model.wspm.ui.action.IntersectRoughnessMapThemeAction">
             <description>%org.kalypso.model.wspm.ui.action.IntersectRoughnessMapThemeAction.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.classification.landuse.ApplyLanduseShapeWizard"
             icon="icons/obj16/landuse.apply.png"
             id="org.kalypso.model.wspm.ui.profil.wizard.classification.landuse.ApplyLanduseShapeWizard"
             name="%org.kalypso.model.wspm.ui.profil.wizard.classification.landuse.ApplyLanduseShapeWizard.name">
          <description>
             %org.kalypso.model.wspm.ui.profil.wizard.classification.landuse.ApplyLanduseShapeWizard.description
          </description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.classification.apply.ApplyClassificationsWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.classification.ApplyClassificationsWizard"
             icon="icons/obj16/apply_classes.png"
             name="%org.kalypso.model.wspm.ui.profil.wizard.classification.ApplyClassificationsWizard.name">
             <description>%org.kalypso.model.wspm.ui.profil.wizard.classification.ApplyClassificationsWizard.description</description>
       </wizard>
       <wizard
             class="org.kalypso.model.wspm.ui.profil.wizard.classification.guess.GuessClassificationsWizard"
             id="org.kalypso.model.wspm.ui.profil.wizard.classification.GuessClassificationsWizard"
             icon="icons/obj16/guess_classes.png"
             name="%org.kalypso.model.wspm.ui.profil.wizard.classification.GuessClassificationsWizard.name">
             <description>%org.kalypso.model.wspm.ui.profil.wizard.classification.GuessClassificationsWizard.description</description>
       </wizard>
    </extension>
    <extension point="org.kalypso.contribs.eclipsercp.wizardEnablement">
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.importProfile.ImportProfileWizard">
          <enablement>
            <reference definitionId="isProfileContainerSelection"/>
          </enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.importProfile.ImportPrfWizard">
          <enablement>
            <reference definitionId="isProfileContainerSelection"/>
          </enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.flipProfile.FlipProfileWizard">
          <enablement>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
             </reference>
          </enablement>
       </wizardEnablement>
       
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.propertyEdit.PropertyEditWizard">
          <enablement>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
             </reference>
          </enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.validateProfiles.ValidateProfilesWizard">
          <enablement>
             <reference definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles"/>
          </enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.createDivider.CreateProfileDeviderWizard">
          <enablement>
                <reference definitionId="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected"/>
          </enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.intersectRoughness.IntersectRoughnessWizard">
          <enablement>
                <reference definitionId="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected"/>
          </enablement>
       </wizardEnablement>
       <wizardEnablement
             wizardID="org.kalypso.model.wspm.ui.profil.wizard.interpolate.geomtry.FillMissingProfilesGeometriesWizard">
          <enablement>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
             </reference></enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.classification.ApplyClassificationsWizard">
          <enablement>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
             </reference>
          </enablement>
       </wizardEnablement>
       <wizardEnablement
             wizardID="org.kalypso.model.wspm.ui.profil.wizard.classification.landuse.ApplyLanduseShapeWizard">
          <enablement>
             <and>
                <reference
                      definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
                </reference>
                <reference
                      definitionId="org.kalypso.model.wspm.ui.definition.hasLanduseShape">
                </reference>
             </and>
          </enablement>
       </wizardEnablement>
       <wizardEnablement wizardID="org.kalypso.model.wspm.ui.profil.wizard.classification.GuessClassificationsWizard">
          <enablement>
             <reference
                   definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
             </reference>
          </enablement>
       </wizardEnablement>
    </extension>
    <extension point="org.eclipse.core.expressions.definitions">
       <definition id="isProfileContainerSelection">
             <with variable="selection">
                <and>
                    <count value="1"/>
                    <iterate operator="and" ifEmpty="false">
                       <or>
                          <test property="org.kalypso.gml.qname" value="{org.kalypso.model.wspmprofile}Profile" />
                          <test property="org.kalypso.gml.targetQName" value="{org.kalypso.model.wspmprofile}Profile" />
                       </or>
                    </iterate>
                </and>
             </with>
       </definition>
    </extension>
    <extension
          point="org.eclipse.ui.commands"> 
      <command
            categoryId="org.kalypso.chart.ui.commands.category"
            description="%org.kalypso.chart.ui.commands.insert.profile.point.description"
            id="org.kalypso.chart.ui.commands.insert.profile.point"
            name="%org.kalypso.chart.ui.commands.insert.profile.point.name">
      </command>
      <command
            categoryId="org.kalypso.chart.ui.commands.category"
            description="%org.kalypso.chart.ui.commands.profile.selection.description"
            id="org.kalypso.chart.ui.commands.profile.selection"
            name="%org.kalypso.chart.ui.commands.profile.selection.name">
      </command>
      <command
            categoryId="org.kalypso.chart.ui.commands.category"
            description="%org.kalypso.chart.ui.commands.profile.update.cursor.description"
            id="org.kalypso.chart.ui.commands.profile.update.cursor"
            name="%org.kalypso.chart.ui.commands.profile.update.cursor.name">
      </command>
    </extension>
    <extension
          point="org.eclipse.ui.handlers">
       <handler
             class="org.kalypso.model.wspm.ui.commands.InsertProfilePointCommandHandler"
             commandId="org.kalypso.chart.ui.commands.insert.profile.point">
       </handler>
       <handler
             class="org.kalypso.model.wspm.ui.commands.SelectProfilePointCommandHandler"
             commandId="org.kalypso.chart.ui.commands.profile.selection">
       </handler>
       <handler
             class="org.kalypso.model.wspm.ui.commands.UpdateProfileCursorCommandHandler"
             commandId="org.kalypso.chart.ui.commands.profile.update.cursor">
       </handler>
       
    </extension>
    <extension
          point="org.eclipse.ui.commandImages">
       <image
             commandId="org.kalypso.chart.ui.commands.insert.profile.point"
             icon="icons/obj16/insert_profile_point.png">
       </image>
       <image
             commandId="org.kalypso.chart.ui.commands.profile.selection"
             icon="icons/obj16/select-point.png">
       </image>
       <image
             commandId="org.kalypso.chart.ui.commands.profile.update.cursor"
             icon="icons/obj16/update_point_cursor.png">
       </image>
    </extension>
    <extension
          point="org.eclipse.ui.commands">
       <command
             categoryId="org.kalypso.ogc.gml.map.category"
             description="%org.kalypso.ogc.gml.map.widgets.straighten.profile.description"
             id="org.kalypso.ogc.gml.map.widgets.straighten.profile"
             name="%org.kalypso.ogc.gml.map.widgets.straighten.profile.name">
       </command>
       <command
             categoryId="org.kalypso.ogc.gml.map.category"
             description="%org.kalypso.ogc.gml.map.widgets.insert.profile.point.description"
             id="org.kalypso.ogc.gml.map.widgets.insert.profile.point"
             name="%org.kalypso.ogc.gml.map.widgets.insert.profile.point.name">
       </command>
       <command
             categoryId="org.kalypso.ogc.gml.map.category"
             description="%org.kalypso.ogc.gml.map.widgets.select.profile.point.description"
             id="org.kalypso.ogc.gml.map.widgets.select.profile.point"
             name="%org.kalypso.ogc.gml.map.widgets.select.profile.point.name">
       </command>
       <command
             categoryId="org.kalypso.ogc.gml.map.category"
             description="%org.kalypso.ogc.gml.map.widgets.display.profile.selection.description"
             id="org.kalypso.ogc.gml.map.widgets.display.profile.selection"
             name="%org.kalypso.ogc.gml.map.widgets.display.profile.selection.name">
       </command>
    </extension>
    <extension
          point="org.eclipse.ui.commandImages">
       <image
             commandId="org.kalypso.ogc.gml.map.widgets.straighten.profile"
             icon="icons/obj16/straighten_profile.gif">
       </image>
       <image
             commandId="org.kalypso.ogc.gml.map.widgets.insert.profile.point"
             icon="icons/obj16/insert_profile_point.png">
       </image>
       <image
             commandId="org.kalypso.ogc.gml.map.widgets.select.profile.point"
             icon="icons/obj16/select-point.png">
       </image>
       <image
             commandId="org.kalypso.ogc.gml.map.widgets.display.profile.selection"
             icon="icons/obj16/update_point_cursor.png">
       </image>
    </extension>
    <extension
          point="org.eclipse.ui.handlers">
       <handler
             commandId="org.kalypso.ogc.gml.map.widgets.straighten.profile">
          <class
                class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
             <parameter
                   name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                   value="org.kalypso.model.wspm.ui.action.straighten.StraightenProfileWidget">
             </parameter>
          </class>
          <enabledWhen>
             <reference
                   definitionId="org.kalypso.model.wspm.tuhh.ui.definition.profileThemePresent">
             </reference>
          </enabledWhen>
       </handler>
       <handler
             commandId="org.kalypso.ogc.gml.map.widgets.insert.profile.point">
          <class
                class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
             <parameter
                   name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                   value="org.kalypso.model.wspm.ui.action.insert.point.InsertProfilePointWidget">
             </parameter>
          </class>
          <enabledWhen>
             <reference
                   definitionId="org.kalypso.model.wspm.tuhh.ui.definition.profileThemePresent">
             </reference>
          </enabledWhen>
       </handler>
       <handler
             commandId="org.kalypso.ogc.gml.map.widgets.select.profile.point">
          <class
                class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
             <parameter
                   name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                   value="org.kalypso.model.wspm.ui.action.selection.SelectProfilePointWidget">
             </parameter>
          </class>
          <enabledWhen>
             <reference
                   definitionId="org.kalypso.model.wspm.tuhh.ui.definition.profileThemePresent">
             </reference>
          </enabledWhen>
       </handler>
       <handler
             commandId="org.kalypso.ogc.gml.map.widgets.display.profile.selection">
          <class
                class="org.kalypso.ogc.gml.map.widgets.SelectWidgetHandler">
             <parameter
                   name="org.kalypso.ogc.gml.map.widgets.SelectWidgetCommand.widget"
                   value="org.kalypso.model.wspm.ui.action.selection.DisplayProfileSelectionWidget">
             </parameter>
          </class>
          <enabledWhen>
             <reference
                   definitionId="org.kalypso.model.wspm.tuhh.ui.definition.profileThemePresent">
             </reference>
          </enabledWhen>
       </handler>
    </extension>
    <extension
          point="org.eclipse.core.expressions.propertyTesters">
       <propertyTester
             class="org.kalypso.model.wspm.ui.view.chart.handler.SwitchProfilePropertyTester"
             id="org.kalypso.model.wspm.ui.view.chart.handler.SwitchProfilePropertyTester"
             namespace="org.kalypso.model.wspm.ui.view.chart.handler"
             properties="direction"
             type="java.lang.Object">
       </propertyTester>
    </extension>
    <extension
          point="org.eclipse.core.expressions.definitions">
       <definition
             id="org.kalypso.model.wspm.ui.view.chart.handler.isPrevoiusEnabled">
          <with
                variable="activeChart">
             <test
                   forcePluginActivation="false"
                   property="org.kalypso.model.wspm.ui.view.chart.handler.direction"
                   value="previous">
             </test>
          </with>
       </definition>
       <definition
             id="org.kalypso.model.wspm.ui.view.chart.handler.isNextEnabled">
          <with
                variable="activeChart">
             <test
                   forcePluginActivation="false"
                   property="org.kalypso.model.wspm.ui.view.chart.handler.direction"
                   value="next">
             </test>
          </with>
       </definition>
    </extension>
</plugin>
