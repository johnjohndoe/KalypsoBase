<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
   <extension-point id="profilPointsSource" name="profilPointsSource" schema="schema/profilPointsSource.exsd"/>
   <extension-point id="profilPointsTarget" name="profilPointsTarget" schema="schema/profilPointsTarget.exsd"/>
   <extension-point id="profilChartLayerProvider" name="profilChartLayerProvider" schema="schema/profilChartLayerProvider.exsd"/>
   <extension-point id="pointPropertyCalculator" name="pointPropertyCalculator" schema="schema/pointPropertyCalculator.exsd"/>
   <extension-point id="profilPointPropertyUiHandlerProvider" name="profilPointPropertyUiHandlerProvider" schema="schema/profilPointPropertyUiHandlerProvider.exsd"/>
   <extension-point id="chartProvider" name="chartProvider" schema="schema/chartProvider.exsd"/>


        <extension
           point="org.eclipse.core.runtime.preferences">
        <initializer class="org.kalypso.model.wspm.ui.preferences.PreferenceInitializer"/>
     </extension>
     <extension
           point="org.eclipse.ui.viewActions">
        <viewContribution
              id="com.bce.profil.eclipse.view.tableContribution"
              targetID="org.kalypso.model.wspm.ui.view.table.TableView">
           <menu
                 id="tableViewMenu"
                 label="%tableViewMenu">
              <groupMarker name="points"/>
              <separator name="additions"/>
           </menu>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.InsertPointsActionDelegate"
                 icon="icons/elcl16/table_insert_points.gif"
                 id="com.bce.profil.eclipse.view.table.insertPoints"
                 label="%com.bce.profil.eclipse.view.table.insertPoints"
                 menubarPath="points"
                 style="push"
                 tooltip="%com.bce.profil.eclipse.view.table.insertPoints.tooltip"/>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.DouglasPeuckerActionDelegate"
                 id="com.bce.profil.eclipse.view.table.douglasPeucker"
                 label="%com.bce.profil.eclipse.view.table.douglasPeucker"
                 menubarPath="points"
                 style="push"
                 tooltip="%com.bce.profil.eclipse.view.table.douglasPeucker.tooltip"/>
           <action
                 class="org.kalypso.model.wspm.ui.view.table.PropertyEditDelegate"
                 id="com.bce.profil.eclipse.view.table.propertyedit"
                 label="%com.bce.profil.eclipse.view.table.propertyedit"
                 menubarPath="points"
                 style="push"
                 tooltip="%com.bce.profil.eclipse.view.table.propertyedit.tooltip">
           </action>
        </viewContribution>
     </extension>
     <extension
           point="org.eclipse.ui.views">
        <category
              id="org.kalypso.model.wspm.profil.view.category"
              name="%category.name.0"
              />
        <view
              allowMultiple="false"
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.legend.LegendViewPart"
              icon="icons/eview16/profil_legend.gif"
              id="org.kalypso.model.wspm.ui.view.legend.LegendViewPart"
              name="%org.kalypso.model.wspm.ui.view.legend.LegendView"/>
        <view
              allowMultiple="false"
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.LayerViewPart"
              icon="icons/eview16/profil_panel.gif"
              id="org.kalypso.model.wspm.ui.view.LayerViewPart"
              name="%org.kalypso.model.wspm.ui.view.LayerView"/>
        <view
              allowMultiple="false"
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.table.TableView"
              icon="icons/eview16/profil_table.gif"
              id="org.kalypso.model.wspm.ui.view.table.TableView"
              name="%org.kalypso.model.wspm.ui.view.table.TableView"/>
        <view
              category="org.kalypso.model.wspm.profil.view.category"
              class="org.kalypso.model.wspm.ui.view.chart.ProfilChartViewPart"
              icon="icons/eview16/profil_table.gif"
              id="org.kalypso.model.wspm.ui.view.chart.ChartView"
              name="%org.kalypso.model.wspm.ui.view.chart.ChartView"/>
     </extension>


   <extension
         id="profilemarker"
         name="%extension.name"
         point="org.eclipse.core.resources.markers">
      <super type="org.eclipse.core.resources.problemmarker"/>
      <persistent value="false"/>
   </extension>
   <extension
           point="org.eclipse.ui.preferencePages">
        <page
              category="org.kalypso.ui.preferences.KalypsoPreferencePage"
              class="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              id="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              name="%org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"/>
        <page
              category="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              class="org.kalypso.model.wspm.ui.preferences.ValidatorPreferencePage"
              id="org.kalypso.model.wspm.ui.preferences.ValidatorPreferencePage"
              name="%org.kalypso.model.wspm.ui.preferences.ValidatorPreferencePage"/>
        <page
              category="org.kalypso.model.wspm.ui.preferences.KalypsoWspmPreferencePage"
              class="org.kalypso.model.wspm.ui.preferences.TablePreferencePage"
              id="org.kalypso.model.wspm.ui.preferences.TablePreferencePage"
              name="%page.name.0">
        </page>
     </extension>
     <extension
           point="org.kalypso.model.wspm.ui.profilPointsSource">
        <profilPointsSource
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.FilePointsSource"/>
        <profilPointsSource
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.SinglePointsSource"/>
     </extension>
     <extension
           point="org.kalypso.model.wspm.ui.profilPointsTarget">
        <profilPointTarget
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilStartTarget"/>
        <profilPointTarget
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilMidTarget"/>
        <profilPointTarget
              class="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget"
              description="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget.description"
              id="org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget"
              label="%org.kalypso.model.wspm.ui.profil.wizard.pointsInsert.impl.ProfilEndTarget"/>
     </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.kalypso.ui.editor.mapeditor.GisMapEditor"
            class="org.kalypso.model.wspm.ui.adapter.ProfileProviderAdapterFactory">
         <adapter type="org.kalypso.model.wspm.ui.profil.IProfilProvider"/>
      </factory>
      <factory
            adaptableType="org.kalypso.ui.editor.gistableeditor.GisTableEditor"
            class="org.kalypso.model.wspm.ui.adapter.ProfileProviderAdapterFactory">
         <adapter type="org.kalypso.model.wspm.ui.profil.IProfilProvider"/>
      </factory>
      <factory
            adaptableType="org.kalypso.ui.editor.gmleditor.ui.GmlEditor"
            class="org.kalypso.model.wspm.ui.adapter.ProfileProviderAdapterFactory">
         <adapter type="org.kalypso.model.wspm.ui.profil.IProfilProvider"/>
      </factory>
      <factory
            adaptableType="org.kalypso.ui.views.map.MapView"
            class="org.kalypso.model.wspm.ui.adapter.ProfileProviderAdapterFactory">
         <adapter type="org.kalypso.model.wspm.ui.profil.IProfilProvider"/>
      </factory>
   </extension>
      <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            adaptable="false"
            id="org.kalypso.model.wspm.ui.objectContribution.showProfile"
            objectClass="org.kalypsodeegree.model.feature.Feature">
         <filter
               name="featureType"
               value="org.kalypso.model.wspmprofile#Profile"/>
         <action
               class="org.kalypso.model.wspm.ui.action.ShowProfileAction"
               icon="icons/obj16/openProfile.gif"
               id="org.kalypso.model.wspm.ui.action.ShowProfileAction"
               label="%org.kalypso.model.wspm.ui.action.ShowProfileAction"
               tooltip="%org.kalypso.model.wspm.ui.action.ShowProfileAction.description"/>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.kalypso.model.wspm.ui.object.contribution.org.kalypso.ui.editor.gmleditor.ui.FeatureAssociationTypeElement"
            objectClass="org.kalypso.ui.editor.gmleditor.ui.FeatureAssociationTypeElement">
         <menu
               id="wspmProfileActions"
               label="%wspmProfileActions"/>
         <filter
               name="featureAssociationQname"
               value="org.kalypso.model.wspmprofile#Profile"/>
         <menu
               id="org.kalypso.model.wspm.ui.menu.import"
               label="%org.kalypso.model.wspm.ui.menu.import"
               path="additions">
            <groupMarker name="imports"/>
            <separator name="additions"/>
         </menu>
         <action
               class="org.kalypso.model.wspm.ui.action.ImportProfilePrfAction"
               id="org.kalypso.model.wspm.ui.action.ImportProfilePrfAction"
               label="%org.kalypso.model.wspm.ui.action.ImportProfilePrfAction"
               menubarPath="org.kalypso.model.wspm.ui.menu.import/imports"
               style="push"
               tooltip="%org.kalypso.model.wspm.ui.action.ImportProfilePrfAction.description"/>
         <action
               class="org.kalypso.model.wspm.ui.action.ImportProfileTrippelAction"
               id="org.kalypso.model.wspm.ui.action.ImportProfileTrippelAction"
               label="%org.kalypso.model.wspm.ui.action.ImportProfileTrippelAction"
               menubarPath="org.kalypso.model.wspm.ui.menu.import/imports"
               style="push"
               tooltip="%org.kalypso.model.wspm.ui.action.ImportProfileTrippelAction.description"/>
         <action
               class="org.kalypso.model.wspm.ui.action.CreateProfileMapAction"
               icon="icons/elcl16/createProfileMap.gif"
               id="org.kalypso.model.wspm.ui.action.CreateProfileMapAction"
               label="%org.kalypso.model.wspm.ui.action.CreateProfileMapAction"
               menubarPath="org.kalypso.model.wspm.ui.wspmProfileActions"
               style="push"
               tooltip="%org.kalypso.model.wspm.ui.action.CreateProfileMapAction.description"/>
      </objectContribution>
 
        <objectContribution
              adaptable="true"
              id="org.kalypso.model.wspm.ui.profil.view.chart.layer.IProfilChartLayer.objectcontribution"
              objectClass="org.kalypso.model.wspm.ui.view.chart.IProfilChartLayer">
           <action
                 class="org.kalypso.model.wspm.ui.action.ProfilLayerActionDelegate"
                 enablesFor="1"
                 icon="icons/elcl16/profil_legend_props.gif"
                 id="com.bce.profil.app.profilLayerContributions.showProperties"
                 label="%com.bce.profil.app.profilLayerContributions.showProperties"
                 menubarPath="additions"
                 style="push"
                 tooltip="%com.bce.profil.app.profilLayerContributions.showProperties.tooltip"/>
        </objectContribution>
     </extension>
     <extension
           point="org.kalypso.core.catalogContribution">
        <catalogContribution
              class="org.kalypso.model.wspm.ui.catalog.WspmFeatureTypeCatalogContribution"
              name="Wspm Style Catalog"/>
     </extension>
     <extension
           point="org.eclipse.ui.ide.markerResolution">
        <markerResolutionGenerator class="org.kalypso.model.wspm.ui.profil.validation.ProfilMarkerResolutionGenerator"/>
     </extension>
     <extension
           point="org.eclipse.ui.newWizards">
        <category
              id="org.kalypso.wspm.ui"
              name="%org.kalypso.wspm.ui"
              parentCategory="org.kalypso.ui.newwizards.kalypso"/>
     </extension>
     <extension
           point="org.eclipse.ui.perspectives">
        <perspective
              class="org.kalypso.model.wspm.ui.product.WspmPerspectiveFactory"
              fixed="false"
              icon="icons/obj16/wspmPerspective.gif"
              id="org.kalypso.model.wspm.ui.product.WspmPerspectiveFactory"
              name="%org.kalypso.model.wspm.ui.product.WspmPerspectiveFactory"/>
        <perspective
              class="org.kalypso.model.wspm.ui.product.ProfileManagerPerspective"
              fixed="false"
              icon="icons/eview16/wsp16.gif"
              id="org.kalypso.model.wspm.ui.product.ProfileManagerPerspective"
              name="%perspective.name.0"/>
     </extension>
     <extension
           point="org.kalypso.model.wspm.core.profileFeatureProvider">
        <profileFeatureProvider
              class="org.kalypso.model.wspm.core.gml.DefaultProfileFeatureProvider"
              id="org.kalypso.model.wspm.core.gml.DefaultProfileFeatureProvider"/>
     </extension>
   <extension
         point="org.kalypso.ui.featureViewExtensionControl">
      <extensionControl
            class="org.kalypso.model.wspm.ui.featureview.ChartFeatureControlFactory"
            id="org.kalypso.model.wspm.ui.featureview.ChartFeatureControlFactory"/>
   </extension>
      <extension
            point="org.eclipse.ui.contexts">
         <context
               id="org.kalypso.model.wspm.ui.view.table.swt.context"
               name="%context.name.0"
               parentId="org.eclipse.ui.contexts.window"/>
      </extension>
      <extension
            point="org.kalypso.model.wspm.ui.pointPropertyCalculator">
         <pointPropertyCalculator
               class="org.kalypso.model.wspm.core.util.pointpropertycalculator.AddFixValueOperator"
               id="org.calypso.model.wspm.core.util.pointpropertycalculator.addfixvalue"
               label="%org.calypso.model.wspm.core.util.pointpropertycalculator.addfixvalue"
               tooltip="%org.calypso.model.wspm.core.util.pointpropertycalculator.addfixvalue.description">
         </pointPropertyCalculator>
         <pointPropertyCalculator
               class="org.kalypso.model.wspm.core.util.pointpropertycalculator.SetFixValueOperator"
               id="org.calypso.model.wspm.core.util.pointpropertycalculator.setfixvalue"
               label="%org.calypso.model.wspm.core.util.pointpropertycalculator.setfixvalue"
               tooltip="%org.calypso.model.wspm.core.util.pointpropertycalculator.setfixvalue.description">
         </pointPropertyCalculator>
         <pointPropertyCalculator
               class="org.kalypso.model.wspm.core.util.pointpropertycalculator.AddPercentValueOperator"
               id="org.calypso.model.wspm.core.util.pointpropertycalculator.addpercentvalue"
               label="%org.calypso.model.wspm.core.util.pointpropertycalculator.addpercentvalue"
               tooltip="%org.calypso.model.wspm.core.util.pointpropertycalculator.addpercentvalue.description">
         </pointPropertyCalculator>
      </extension>
      <extension
            point="org.eclipse.ui.menus">
         <menuContribution
               locationURI="toolbar:org.kalypso.model.wspm.ui.view.table.TableView">
            <command
                  commandId="org.kalypso.ui.tupleResult.copyToClipboardCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveDownSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveUpSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.deleteSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.addRowCommand"
                  style="push">
            </command>
         </menuContribution>
         <menuContribution
               locationURI="popup:org.kalypso.model.wspm.ui.view.table.TableView">
            <command
                  commandId="org.kalypso.ui.tupleResult.copyToClipboardCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveDownSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.moveUpSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.deleteSelectedRowsCommand"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.ui.tupleResult.addRowCommand"
                  style="push">
            </command>
         </menuContribution>
         <menuContribution
               locationURI="toolbar:org.kalypso.model.wspm.ui.view.chart.ChartView">
            <command
                  commandId="org.kalypso.chart.ui.commands.zoomIn"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.zoomOut"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.pan"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.maximize"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.chart.ui.commands.edit"
                  style="toggle">
            </command>
            <command
                  commandId="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="additions"
                  visible="false">
            </separator>
         </menuContribution>
         <menuContribution
               locationURI="menu:org.kalypso.model.wspm.ui.view.chart.ChartView">
            <separator
                  name="additions"
                  visible="false">
            </separator>
         </menuContribution>
         <menuContribution
               locationURI="toolbar:org.kalypso.model.wspm.ui.view.legend.LegendViewPart">
            <command
                  commandId="org.kalypso.model.wspm.ui.view.legend.addlayer"
                  style="push">
            </command>
            <command
                  commandId="org.kalypso.model.wspm.ui.view.legend.removelayer"
                  style="push">
            </command>
         </menuContribution>
      </extension>
      <extension
            point="de.openali.odysseus.chart.factory.LayerProvider">
         <provider
               class="org.kalypso.model.wspm.ui.featureview.PolynomeLayerProvider"
               id="org.kalypso.model.wspm.ui.featureview.PolynomeLayerProvider">
         </provider>
         <provider
               class="org.kalypso.model.wspm.ui.featureview.TupleResultLineLayerProvider"
               id="org.kalypso.model.wspm.ui.featureview.TupleResultLineLayerProvider">
         </provider>
      </extension>
      <extension
            point="org.eclipse.ui.commands">
         <command
               categoryId="org.kalypso.model.wspm.ui.view.legend.category"
               id="org.kalypso.model.wspm.ui.view.legend.addlayer"
               name="%org.kalypso.model.wspm.ui.view.legend.addlayer">
         </command>
         <category
               id="org.kalypso.model.wspm.ui.view.legend.category"
               name="%category.name">
         </category>
         <command
               categoryId="org.kalypso.model.wspm.ui.view.legend.category"
               id="org.kalypso.model.wspm.ui.view.legend.removelayer"
               name="%org.kalypso.model.wspm.ui.view.legend.removelayer">
         </command>
      </extension>
      <extension
            point="org.eclipse.ui.handlers">
         <handler
               class="org.kalypso.model.wspm.ui.view.legend.AddLayerHandler"
               commandId="org.kalypso.model.wspm.ui.view.legend.addlayer">
         </handler>
         <handler
               class="org.kalypso.model.wspm.ui.view.legend.RemoveLayerHandler"
               commandId="org.kalypso.model.wspm.ui.view.legend.removelayer">
         </handler>
      </extension>
      <extension
            point="org.eclipse.ui.commandImages">
         <image
               commandId="org.kalypso.model.wspm.ui.view.legend.addlayer"
               icon="icons/etool16/add_layer.gif">
         </image>
         <image
               commandId="org.kalypso.model.wspm.ui.view.legend.removelayer"
               icon="icons/etool16/delete_layer.gif">
         </image>
         <image
               commandId="org.kalypso.model.wspm.ui.command.profile.editProperties"
               icon="icons/etool16/profile_property_edit.gif">
         </image>
         <image
               commandId="org.kalypso.model.wspm.ui.command.profile.validate"
               icon="icons/etool16/profile_validate.gif">
         </image>
         <image
               commandId="org.kalypso.model.wspm.ui.command.profile.flip"
               icon="icons/obj16/flipProfile.gif">
         </image>
      </extension>
     
    <!-- Commands for the map outline -->
	<extension point="org.eclipse.ui.commands">
		<category id="org.kalypso.mode.wspm.ui.profile.commands" name="%category.name.1"/>
		<command categoryId="org.kalypso.mode.wspm.ui.profile.commands" id="org.kalypso.ui.map.outline.command.WspmCreateDevider" name="%org.kalypso.model.wspm.ui.action.CreateDeviderMapThemeAction"  description="%org.kalypso.model.wspm.ui.action.CreateDeviderMapThemeAction.description"/>
		<command categoryId="org.kalypso.mode.wspm.ui.profile.commands" id="org.kalypso.ui.map.outline.command.WspmIntersectRoughnessMap" name="%org.kalypso.model.wspm.ui.action.IntersectRoughnessMapThemeAction"  description="%org.kalypso.model.wspm.ui.action.IntersectRoughnessMapThemeAction.description"/>
		  <command
		        description="%org.kalypso.model.wspm.ui.action.PropertyEditAction.description"
		        id="org.kalypso.model.wspm.ui.command.profile.editProperties"
		        name="%org.kalypso.model.wspm.ui.action.PropertyEditAction">
		  </command>
		  <command categoryId="org.kalypso.mode.wspm.ui.profile.commands"
		        description="%org.kalypso.model.wspm.ui.action.ValidateProfilesAction.description"
		        id="org.kalypso.model.wspm.ui.command.profile.validate"
		        name="%org.kalypso.model.wspm.ui.action.ValidateProfilesAction">
		  </command>
		  <command categoryId="org.kalypso.mode.wspm.ui.profile.commands"
		        description="%org.kalypso.model.wspm.ui.action.FlipProfileAction.description"
		        id="org.kalypso.model.wspm.ui.command.profile.flip"
		        name="%org.kalypso.model.wspm.ui.action.FlipProfileAction">
		  </command>
	</extension>

	<extension point="org.eclipse.ui.handlers">
		<handler commandId="org.kalypso.ui.map.outline.command.WspmCreateDevider" class="org.kalypso.model.wspm.ui.action.CreateDeviderHandler">
			<activeWhen>
				<reference definitionId="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected"/>
			</activeWhen>
		</handler>
		<handler commandId="org.kalypso.ui.map.outline.command.WspmIntersectRoughnessMap" class="org.kalypso.model.wspm.ui.action.IntersectRoughnessHandler">
			<enabledWhen>
				<reference definitionId="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected"/>
			</enabledWhen>
		</handler>
	</extension>


	<extension point="org.eclipse.core.expressions.definitions">
		<definition id="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected">
			<with variable="selection">
				<and>
					<count value="1"/>
					<iterate ifEmpty="false" operator="and">
						<test property="org.kalypso.ui.test.theme.isFeatureTheme"/>
					</iterate>
			        <test property="org.kalypso.model.wspm.ui.hasProfileSelection"/>
				</and>
			</with>
		</definition>
  <definition
        id="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
     <with
           variable="selection">
        <test
              property="org.kalypso.model.wspm.ui.hasProfileSelection">
        </test>
     </with>
  </definition>
	</extension>

<extension point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="popup:org.eclipse.ui.popup.any?after=additions">
       <menu
             icon="icons/etool16/profileChange.gif"
             id="org.kalypso.model.wspm.ui.profileChange"
             label="%menu.label"
             mnemonic="%menu.mnemonic">
          <command
                commandId="org.kalypso.ui.map.outline.command.WspmCreateDevider"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected">
                </reference>
             </visibleWhen>
          </command>
          <command
                commandId="org.kalypso.ui.map.outline.command.WspmIntersectRoughnessMap"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="org.kalypso.model.wspm.ui.definition.oneProfileThemeSelected">
                </reference>
             </visibleWhen>
          </command>
          <command
                commandId="org.kalypso.model.wspm.ui.command.profile.editProperties"
                style="push">
             <visibleWhen
                   checkEnabled="true">
             </visibleWhen>
          </command>
          <command
                commandId="org.kalypso.model.wspm.ui.command.profile.validate"
                style="push">
             <visibleWhen
                   checkEnabled="true">
             </visibleWhen>
          </command>
          <command
                commandId="org.kalypso.model.wspm.ui.command.profile.flip"
                style="push">
             <visibleWhen
                   checkEnabled="true">
             </visibleWhen>
          </command>
          <separator
                name="additions"
                visible="false">
          </separator>
       </menu>
    </menuContribution>
  </extension>
<extension
      point="org.eclipse.core.expressions.propertyTesters">
   <propertyTester
         class="org.kalypso.model.wspm.ui.action.ProfileSelectionTester"
         id="org.kalypso.model.wspm.ui.propertyTester.profiles"
         namespace="org.kalypso.model.wspm.ui"
         properties="hasProfileSelection"
         type="org.eclipse.jface.viewers.ISelection">
   </propertyTester>
</extension>
<extension
      point="org.eclipse.ui.handlers">
   <handler
         class="org.kalypso.model.wspm.ui.profil.wizard.propertyEdit.PropertyEditHandler"
         commandId="org.kalypso.model.wspm.ui.command.profile.editProperties">
      <enabledWhen>
         <reference
               definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
         </reference>
      </enabledWhen>
   </handler>
   <handler
         class="org.kalypso.model.wspm.ui.profil.wizard.validateProfiles.ValidateProfilesHandler"
         commandId="org.kalypso.model.wspm.ui.command.profile.validate">
      <enabledWhen>
         <reference
               definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
         </reference>
      </enabledWhen>
   </handler>
   <handler
         class="org.kalypso.model.wspm.ui.profil.wizard.flipProfile.FlipProfileHandler"
         commandId="org.kalypso.model.wspm.ui.command.profile.flip">
      <enabledWhen>
         <reference
               definitionId="org.kalypso.model.wspm.ui.definition.selectionHasProfiles">
         </reference>
      </enabledWhen>
   </handler>
</extension>
<extension point="org.eclipse.ui.commands">
   <command
        categoryId="org.kalypso.chart.ui.commands.category"
        id="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand"
        name="%org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand.name" description="%org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand.description">
  </command>
</extension>
<extension
      point="org.eclipse.ui.commandImages">
   <image
         commandId="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand"
         icon="icons/etool16/wspLayerCommand.gif">
   </image>
</extension>
<extension
      point="org.eclipse.ui.handlers">
   <handler
         class="org.kalypso.model.wspm.ui.view.chart.layer.WspLegendHandler"
         commandId="org.kalypso.model.wspm.ui.commands.WspLayerLegendCommand">
   </handler>
</extension>

</plugin>
